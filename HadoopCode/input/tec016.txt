     1	_________________________________________________________________
     2	STACKER NOTE                      Stac Electronics Technical Note
     3	
     4	Subject: QEMM386 OPTIMIZE and STACKER version 1.x.
     5	
     6	Tech016 - 2/20/92
     7	Page 1 OF 2
     8	_________________________________________________________________
     9	Note: This procedure may be used with Stacker 2.0, however, it
    10	is recommended that you use the SSWAP upgrade.  See tech030.
    11	
    12	Introduction:
    13	
    14	Quarterdeck's QEMM program allows device drivers (for
    15	example,STACKER.COM) and TSR programs to be loaded into upper
    16	memory.  This package also includes a utility called OPTIMIZE to
    17	organize the loading of drivers into upper memory. However,
    18	OPTIMIZE will not run as expected when the boot drive is swapped
    19	in your Stacker installation.
    20	
    21	1. During this procedure, you will need to temporarily alter two
    22	of the files on your system. These changes may cause other
    23	programs to not run properly. DO NOT try to run any other
    24	programs until this procedure is completed and OPTIMIZE has
    25	finished its work.
    26	
    27	2. STACKER will work with OPTIMIZE, but the drive swapping
    28	feature must be temporarily disabled. OPTIMIZE expects the
    29	CONFIG.SYS and AUTOEXEC.BAT files to be on the C: drive.
    30	
    31	3.On a system where the uncompressed drive (usually drive C:) is
    32	not swapped, OPTIMIZE will work properly when the necessary QEMM
    33	files are on the boot drive.
    34	
    35	4. Loading drivers or programs into upper memory requires a block
    36	in upper memory at least as large as the amount of memory
    37	required to initialize the driver or program (this is usually
    38	larger than the 'resident' size of the driver or program).
    39	
    40	5.If you use /EMS with STACKER 2.0 and the QEMM 6.0 STEALTH
    41	option, make sure to add DBF=2 to the QEMM device driver line.
    42	     For example:     Device=c:\qemm\qemm386.sys RAM ST:M DBF=2
    43	
    44	Procedure:
    45	
    46	1. In the CONFIG.SYS file, locate the line(s) which resemble
    47	DEVICE=C:\STACKER\SSWAP.COM  C:\STACVOL.DSK /SYNC  Using a text
    48	editor, add "REM " (without the quotes) in front of each of those
    49	lines.  For example:  REM Device=C:\STACKER\SSWAP.COM .......
    50	
    51	2. In the AUTOEXEC.BAT file on the UNCOMPRESSED (boot) drive,
    52	exchange all references between the uncompressed drive and the
    53	Stacker volume.
    54	
    55	     For example: If the C: and D: drives are swapped, change all
    56	occurrences of C: to D: and from D: to C: in the AUTOEXEC.BAT on
    57	the D: drive.
    58	
    59	3. Be sure that the following QEMM programs reside in a QEMM sub-
    60	directory on the UNCOMPRESSED (boot) drive; OPTIMIZE will look
    61	for them there:
    62	
    63	           QEMM386.SYS (or QEMM.SYS if you are running QEMM 50/60
    64	or QEMM-386 version 5.0)
    65	           OPTIMIZE.COM
    66	           LOADHI.SYS
    67	           LOADHI.COM
    68	           LOGOPT.COM (not needed for QEMM ver 6.x)
    69	           TESTBIOS.COM
    70	           BUFFERS.COM  (if you are using a version of DOS 3.x)
    71	           RSTRCFG.SYS
    72	           MCA.ADL      (if you are using a microchannel
    73	computer)
    74	           WINHIRAM.VXD (if you are planning on running Windows
    75	3.0 in enhanced mode)
    76	           WINSTLTH.VXD (if you are planning on running the
    77	STEALTH option)
    78	
    79	4. Reboot the system to make sure the drives and files are set up
    80	correctly. You may need to continue to edit the AUTOEXEC.BAT file
    81	and reboot until the the system boots without error. Typical
    82	errors are "File not found" or "Bad command or filename".
    83	
    84	       NOTE: At this point, do not try to run any other programs
    85	on your system until the changes to the CONFIG.SYS and
    86	AUTOEXEC.BAT files have been reversed. You will be prompted to do
    87	this in Step 6) below.
    88	
    89	5.  When you get the system booting with no errors, you may
    90	change to the QEMM sub-directory on the uncompressed (boot) drive
    91	and run OPTIMIZE. Refer to the QEMM manual for information on
    92	running the OPTIMIZE program.
    93	
    94	6. When OPTIMIZE has completed, restore the AUTOEXEC.BAT file and
    95	the CONFIG.SYS file on the uncompressed drive to their pre-
    96	OPTIMIZE status (ie, reverse the changes made in Step 1) and Step
    97	2) above).
    98	
    99	7. Reboot the system a final time to load the changes to
   100	CONFIG.SYS and AUTOEXEC.BAT into memory.
   101	
   102	
