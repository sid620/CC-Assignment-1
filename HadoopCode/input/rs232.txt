     1	.pn
     2	             A Practical Guide to RS-232 Interfacing
     3	
     4	                       Lawrence E. Hughes
     5	
     6	                       Mycroft Labs, Inc.
     7	                          P.O. Box 6045
     8	                      Tallahassee, FL 32301
     9	
    10	   The  following information is intended to collect together  in
    11	one place,  and explain in relatively simple terms, enough of the
    12	details of the RS-232 standard to allow a technician to construct
    13	and/or  debug  interfaces  between any  two  "RS-232  Compatible"
    14	devices.  A more detailed coverage of the subject may be found in
    15	the  book  "Technical Aspects of Data Communication" by  John  E.
    16	McNamara (1977, Digital Press).
    17	
    18	   This  guide  is necessary due to the casual way  that  vendors
    19	implement  "RS-232"  interfaces,   sometimes  omitting   required
    20	signals,  requiring optional ones, or worse, implementing signals
    21	incorrectly.  Due  to  this,  and  a lack  of  readily  available
    22	information   about  the  real  EIA  standard,   there  is  often
    23	considerable confusion involved in trying to interface two RS-232
    24	devices.
    25	
    26	                           BACKGROUND
    27	
    28	   RS-232-C  is the most recent version of the  EIA  (Electronics
    29	Industry   Association)  standard  for  low  speed  serial   data
    30	communication.  It  defines  a  number of  parameters  concerning
    31	voltage levels, loading characteristics and timing relationships.
    32	The  actual connectors which are almost universally used  (DB-25P
    33	and DB-25S,  sometimes called "EIA connectors") are  recommended,
    34	but not mandatory.  Typical practice requires mounting the female
    35	(DB-25S) connector on the chassis of communication equipment, and
    36	male  (DB-25P)  connectors  on  the  cable  connecting  two  such
    37	devices.
    38	
    39	   There are two main classes of RS-232 devices, namely DTE (Data
    40	Terminal   Equipment),   such   as  terminals,   and  DCE   (Data
    41	Communication Equipment),  such as modems.  Typically,  one  only
    42	interfaces a DTE to a DCE,  as opposed to one DTE to another DTE,
    43	or  one  DCE to another DCE,  although there are ways to  do  the
    44	later  two  by building non-standard cables.  Rarely if ever  are
    45	more than two devices involved in a given interface (multidrop is
    46	not supported). A serial port on a computer may be implemented as
    47	either  DTE  or  DCE,  depending  on what type of  device  it  is
    48	intended to support.
    49	
    50	   RS-232  is  intended for relatively short (50 feet  or  less),
    51	relatively low speed (19,200 bits per second or less) serial  (as
    52	opposed  to  parallel)  communications.   Both  asynchronous  and
    53	synchronous  serial encoding are supported.  As 'digital' signals
    54	(switched  D.C.  voltage,  such  as square waves)  are  used,  as
    55	opposed to 'analog' signals (continuously varying  voltage,  such
    56	as  sine  waves)  a very wide bandwidth channel (such  as  direct
    57	wire) is required.  A limited bandwidth channel (such as a  phone
    58	circuit)  would  cause  severe and  unacceptable  distortion  and
    59	consequent loss of information.
    60	
    61	   RS-232 will support simplex,  half-duplex, or full-duplex type
    62	channels. In a simplex channel, data will only ever be travelling
    63	in one direction,  e.g.  from DCE to DTE.  An example might be  a
    64	'Receive Only' printer. In a half-duplex channel, data may travel
    65	in  either  direction,  but at any given time data will  only  be
    66	travelling in one direction, and the line must be 'turned around'
    67	before  data can travel in the other direction.  An example might
    68	be  a Bell 201 style modem.  In a full-duplex channel,  data  may
    69	travel in both directions simultaneously.  An example might be  a
    70	Bell 103 style modem.  Certain of the RS-232 'hand-shaking' lines
    71	are used to resolve problems associated with these modes, such as
    72	which direction data may travel at any given instant.
    73	
    74	   If  one  of the devices involved in an RS-232 interface  is  a
    75	real  modem (especially a half-duplex modem),  the 'hand-shaking'
    76	lines  must be supported,  and the timing  relationships  between
    77	them  are quite important.  These lines are typically much easier
    78	to deal with if no modems are involved.  In certain cases,  these
    79	lines may be used to allow one device (which is receiving data at
    80	a  higher rate than it is capable of processing indefinitely)  to
    81	cause the other device to pause while the first one 'catches up'.
    82	This use of the hand-shaking lines was not really intended by the
    83	designers of the RS-232 standard,  but it is a useful  by-product
    84	of the way such interfaces are typically implemented.
    85	
    86	   Much  of  the  RS-232 standard is concerned  with  support  of
    87	'modems'.  These  are devices which can convert a serial  digital
    88	data  signal  into  an  analog signal compatible  with  a  narrow
    89	bandwidth  (e.g.  3  kHz) channel such as  a  switched  telephone
    90	circuit,  and back into serial digital data on the other end. The
    91	first  process is called 'MOdulation',  and the second process is
    92	called 'DEModulation', hence the term 'MODEM'. The actual process
    93	used  (at  data  rates  of up to 1200 bits  per  second)  is  FSK
    94	(Frequency Shift Keying), in which a constant frequency sine wave
    95	(called  the  'carrier')  is  shifted to  a  slightly  higher  or
    96	slightly  lower  frequency  to represent a logic 0  or  logic  1,
    97	respectively.  In  a  half duplex  modem,  the  entire  available
    98	bandwidth is used for one direction.  In a full duplex modem, the
    99	available bandwidth is divided into two sub-bands, hence there is
   100	both  an 'originate carrier' (e.g.  for data from the terminal to
   101	the computer),  and an 'answer carrier' (e.g.  for data from  the
   102	computer to the terminal). The actual frequencies (in Hertz) used
   103	on the Bell 103A full duplex modem are:
   104	
   105	     signal    state   Originate  Answer
   106	
   107	     logic 0   SPACE     1180      1850
   108	     carrier             1080      1750
   109	     logic 1   MARK       980      1650
   110	
   111	.pa
   112	           THE STANDARD CIRCUITS AND THEIR DEFINITIONS
   113	
   114	   For  the  purposes  of the RS-232  standard,  a  'circuit'  is
   115	defined  to  be a continuous wire from one device to  the  other.
   116	There  are 25 circuits in the full specification,  less than half
   117	of which are at all likely to be found in a given  interface.  In
   118	the  simplest  case,  a full-duplex interface may be  implemented
   119	with as few as 3 circuits. There is a certain amount of confusion
   120	associated with the names of these circuits, partly because there
   121	are three different naming conventions (common name,  EIA circuit
   122	name,  and CCITT circuit name).  The table below lists all  three
   123	names, along with the circuit number (which is also the connector
   124	pin with which that circuit is normally associated on both ends).
   125	Note  that  the signal names are from the viewpoint  of  the  DTE
   126	(e.g.  Transmit Data is data being sent by the DTE,  but received
   127	by the DCE).
   128	
   129	     PIN  NAME EIA  CCITT  DTE  DCE     FUNCTION
   130	
   131	      1    CG   AA   101     ---        Chassis Ground
   132	      2    TD   BA   103     -->        Transmit Data
   133	      3    RD   BB   104     <--        Receive Data
   134	      4    RTS  CA   105     -->        Request To Send
   135	      5    CTS  CB   106     <--        Clear To Send
   136	      6    DSR  CC   107     <--        Data Set Ready
   137	      7    SG   AB   102     ---        Signal Ground
   138	      8    DCD  CF   109     <--        Data Carrier Detect
   139	      9*                     <--        Pos. Test Voltage
   140	     10*                     <--        Neg. Test Voltage
   141	     11                                 (usually not used)
   142	     12+   SCDC SCF  122     <--        Sec. Data Car. Detect
   143	     13+   SCTS SCB  121     <--        Sec. Clear To Send
   144	     14+   STD  SBA  118     -->        Sec. Transmit Data
   145	     15#   TC   DB   114     <--        Transmit Clock
   146	     16+   SRD  SBB  119     <--        Sec. Receive Data
   147	     17#   RC   DD   115     <--        Receive Clock
   148	     18                                 (not usally used)
   149	     19+   SRTS SCA  120     -->        Sec. Request To Send
   150	     20    DTR  CD   108.2   -->        Data Terminal Ready
   151	     21*   SQ   CG   110     <--        Signal Quality
   152	     22    RI   CE   125     <--        Ring Indicator
   153	     23*        CH   111     -->        Data Rate Selector
   154	                CI   112     <--        Data Rate Selector
   155	     24*   XTC  DA   113     -->        Ext. Transmit Clock
   156	     25*                     -->        Busy
   157	
   158	   In the above, the character following the pin number means:
   159	
   160	     *    rarely used
   161	     +    used only if secondary channel implemented
   162	     #    used only on synchronous interfaces
   163	
   164	also, the direction of the arrow indicates which end (DTE or DCE)
   165	originates  each signal,  except for the ground lines (---).  For
   166	example, circuit 2 (TD) is originated by the DTE, and received by
   167	the DCE.  Certain of the above circuits (11,  14, 16, and 18) are
   168	used only by (or in a different way by) Bell 208A modems.
   169	
   170	   A  secondary channel is sometimes used to provide a very  slow
   171	(5  to  10 bits per second) path for return information (such  as
   172	ACK or NAK characters) on a primarily half duplex channel. If the
   173	modem  used  suppports  this feature,  it  is  possible  for  the
   174	receiver  to accept or reject a message without having  to  'turn
   175	the  line  around',  a  process  that usally  takes  100  to  200
   176	milliseconds.
   177	
   178	   On  the above circuits,  all voltages are with respect to  the
   179	Signal Ground (SG) line. The following conventions are used:
   180	
   181	     Voltage        Signal    Logic     Control
   182	     +3 to +25      SPACE       0          On
   183	     -3 to -25      MARK        1          Off
   184	
   185	Note  that the voltage values are inverted from the logic  values
   186	(e.g.  the  more  positive logic value corresponds  to  the  more
   187	negative  voltage).  Note also that a logic 0 corresponds to  the
   188	signal  name being 'true' (e.g.  if the DTR line is at  logic  0,
   189	that is,  in the +3 to +25 voltage range,  then the Data Terminal
   190	IS Ready).
   191	
   192	           ELECTRICAL CHARACTERISTICS OF EACH CIRCUIT
   193	
   194	   The following criteria apply to the electrical characteristics
   195	of each of the above lines:
   196	
   197	1) The magnitude of an open circuit voltage shall not exceed 25V.
   198	
   199	2)  The driver shall be able to sustain a short to any other wire
   200	in the cable without damage to itself or to the other  equipment,
   201	and the short circuit current shall not exceed 0.5 ampere.
   202	
   203	3)  Signals shall be considered in the MARK (logic 1) state  when
   204	the  voltage is more negative than -3V with respect to the Signal
   205	Ground.  Signals shall be considered in the SPACE (logic 0) state
   206	when  the  voltage is more positive that 3V with respect  to  the
   207	Signal  Ground.  The range between -3V and 3V is defined  as  the
   208	transition region, within which the signal state is not defined.
   209	
   210	4)  The  load impedance shall have a DC resistance of  less  than
   211	7000 ohms when measured with an applied voltage of from 3V to 25V
   212	but more than 3000 ohms when measured with a voltage of less than
   213	25V.
   214	
   215	5) When the terminator load resistance meets the requirements  of
   216	Rule 4 above,  and the terminator open circuit voltage is 0V, the
   217	magnitude of the potential of that circuit with respect to Signal
   218	Ground will be in the 5V to 15V range.
   219	
   220	6)  The  driver  shall  assert a voltage  between  -5V  and  -15V
   221	relative  to  the  signal  ground  to  represent  a  MARK  signal
   222	condition.  The driver shall assert a voltage between 5V and  15V
   223	relative  to  the  Signal  Ground to  represent  a  SPACE  signal
   224	condition.  Note  that this rule in conjunction with Rule 3 above
   225	allows for 2V of noise margin.  Note also that in practice,  -12V
   226	and 12V are typically used.
   227	
   228	7)  The  driver  shall change the output voltage at  a  rate  not
   229	exceeding 30 volts per microsecond, but the time required for the
   230	signal to pass through the -3V to +3V transition region shall not
   231	exceed  1 millisecond,  or 4 percent of a bit time,  whichever is
   232	smaller.
   233	
   234	8) The shunt capacitance of the terminator shall not exceed  2500
   235	picofarads,  including  the capacitance of the cable.  Note  that
   236	when  using  standard  cable with 40 to 50  picofarads  per  foot
   237	capacitance,  this  limits  the cable length to no more  than  50
   238	feet. Lower capacitance cable allows longer runs.
   239	
   240	9) The impedance of the driver circuit under power-off conditions
   241	shall be greater than 300 ohms.
   242	
   243	   Note that two widely available integrated circuit chips  (1488
   244	and 1489) implement TTL to RS232 drivers (4 per chip),  and RS232
   245	receivers  to TTL (also 4 per chip),  in a manner consistent with
   246	all of the above rules.
   247	
   248	             DEFINITION OF THE MOST COMMON CIRCUITS
   249	
   250	1    CG    Chassis Ground
   251	
   252	     This  circuit  (also called Frame Ground) is a mechanism  to
   253	     insure  that the chassis of the two devices are at the  same
   254	     potential, to prevent electrical shock to the operator. Note
   255	     that  this circuit is not used as the reference for  any  of
   256	     the other voltages. This circuit is optional. If it is used,
   257	     care should be taken to not set up ground loops.
   258	
   259	2    TD   Transmit Data
   260	
   261	     This  circuit is the path whereby serial data is  sent  from
   262	     the DTE to the DCE.  This circuit must be present if data is
   263	     to travel in that direction at any time.
   264	
   265	3    RD   Receive Data
   266	
   267	     This  circuit  is the path whereby serial data is sent  from
   268	     the DCE to the DTE.  This circuit must be present if data is
   269	     to travel in that direction at any time.
   270	
   271	4    RTS  Request To Send
   272	
   273	     This  circuit  is  the signal that indicates  that  the  DTE
   274	     wishes  to  send data to the DCE (note that no such line  is
   275	     available  for the opposite direction,  hence the  DTE  must
   276	     always be ready to accept data).  In normal  operation,  the
   277	     RTS  line  will be OFF (logic 1 / MARK).  Once the  DTE  has
   278	     data  to  send,  and has determined that the channel is  not
   279	     busy,  it will set RTS to ON (logic 0 / SPACE), and await an
   280	     ON condition on CTS from the DCE,  at which time it may then
   281	     begin  sending.  Once the DTE is through  sending,  it  will
   282	     reset  RTS  to  OFF (logic 1 / MARK).  On a  full-duplex  or
   283	     simplex  channel,  this  signal  may be set to  ON  once  at
   284	     initialization and left in that state.  Note that some  DCEs
   285	     must  have  an incoming RTS in order to  transmit  (although
   286	     this  is  not strictly according to the standard).  In  this
   287	     case,  this  signal must either be brought across  from  the
   288	     DTE,  or provided by a wraparound (e.g. from DSR) locally at
   289	     the DCE end of the cable.
   290	
   291	5    CTS  Clear To Send
   292	
   293	     This  circuit is the signal that indicates that the  DCE  is
   294	     ready to accept data from the DTE.  In normal operation, the
   295	     CTS line will be in the OFF state. When the DTE asserts RTS,
   296	     the  DCE  will do whatever is necessary to allow data to  be
   297	     sent (e.g.  a modem would raise carrier,  and wait until  it
   298	     stabilized).  At this time,  the DCE would set CTS to the ON
   299	     state, which would then allow the DTE to send data. When the
   300	     RTS from the DTE returns to the OFF state,  the DCE releases
   301	     the channel (e.g.  a modem would drop carrier), and then set
   302	     CTS back to the OFF state. Note that a typical DTE must have
   303	     an  incoming CTS before it can transmit.  This  signal  must
   304	     either  be  brought  over from the DCE,  or  provided  by  a
   305	     wraparound  (e.g.  from  DTR) locally at the DTE end of  the
   306	     cable.
   307	
   308	6    DSR  Data Set Ready
   309	
   310	     This circuit is the signal that informs the DTE that the DCE
   311	     is alive and well. It is normally set to the ON state by the
   312	     DCE  upon power-up and left there.  Note that a typical  DTE
   313	     must  have  an incoming DSR in order to  function  normally.
   314	     This  line  must either be brought over  from  the  DCE,  or
   315	     provided by a wraparound (e.g.  from DTR) locally at the DTE
   316	     end  of  the cable.  On the DCE end of the  interface,  this
   317	     signal  is almost always present,  and may be  wrapped  back
   318	     around (to DTR and/or RTS) to satisfy required signals whose
   319	     normal function is not required.
   320	
   321	7    SG   Signal Ground
   322	
   323	     This  circuit is the ground to which all other voltages  are
   324	     relative. It must be present in any RS-232 interface.
   325	
   326	8    DCD  Data Carrier Detect
   327	
   328	     This  circuit is the signal whereby the DCE informs the  DTE
   329	     that it has an incoming carrier.  It may be used by the  DTE
   330	     to  determine  if the channel is idle,  so that the DTE  can
   331	     request  it  with  RTS.  Note that some DTEs  must  have  an
   332	     incoming DCD before they will operate.  In this  case,  this
   333	     signal must either be brought over from the DCE, or provided
   334	     locally  by a wraparound (e.g.  from DTR) locally at the DTE
   335	     end of the cable.
   336	
   337	15   TC   Transmit Clock
   338	
   339	     This circuit provides the clock for the transmitter  section
   340	     of  a synchronous DTE.  It may or may not be running at  the
   341	     same  rate  as  the receiver clock.  This  circuit  must  be
   342	     present on synchronous interfaces.
   343	
   344	17   RC   Receiver Clock
   345	
   346	     This  circuit provides the clock for the receiver section of
   347	     a synchronous DTE.  It may of may not be running at the same
   348	     rate as the transmitter clock.  Note that both TC and RC are
   349	     sourced  by  the  DCE.  This  circuit  must  be  present  on
   350	     synchronous interfaces.
   351	
   352	20   DTR  Data Terminal Ready
   353	
   354	     This  circuit provides the signal that informs the DCE  that
   355	     the  DTE  is alive and well.  It is normally set to  the  ON
   356	     state  by the DTE at power-up and left there.  Note  that  a
   357	     typical  DCE  must  have  an incoming  DTR  before  it  will
   358	     function  normally.  This signal must either be brought over
   359	     from the DTE,  or provided by a wraparound (e.g.  from  DSR)
   360	     locally at the DCE end of the cable.  On the DTE side of the
   361	     interface,  this signal is almost always present, and may be
   362	     wrapped back around to other circuits (e.g.  DSR, CTS and/or
   363	     DCD)  to  satisfy  required hand-shaking  signals  if  their
   364	     normal function is not required.
   365	
   366	   Note that in an asynchronous channel,  both ends provide their
   367	own internal timing, which (as long as they are within 5% of each
   368	other) is sufficient for them to agree when the bits occur within
   369	a single character.  In this case,  no timing information need be
   370	sent over the interface between the two devices. In a synchronous
   371	channel,  however,  both ends must agree when the bits occur over
   372	possibly thousands of characters. In this case, both devices must
   373	use the same clocks.  Note that the transmitter and receiver  may
   374	be  running  at different rates.  Note also that BOTH clocks  are
   375	provided  by the DCE.  When one has a synchronous  terminal  tied
   376	into a synchronous port on a computer via two synchronous modems,
   377	for  example,  and the terminal is transmitting,  the  terminal's
   378	modem supplies the Transmit Clock,  which is brought directly out
   379	to the terminal at its end,  and encodes the clock with the data,
   380	sends  it to the computer's modem,  which recovers the clock  and
   381	brings  it  out as the Receive Clock to the  computer.  When  the
   382	computer  is  transmitting,  the same thing happens in the  other
   383	direction. Hence, whichever modem is transmitting must supply the
   384	clock  for  that  direction,  but on each  end,  the  DCE  device
   385	supplies both clocks to the DTE device.
   386	
   387	   All  of the above applies to interfacing a DTE device to a DCE
   388	device.  In  order to interface two DTE devices,  it  is  usually
   389	sufficient to provide a 'flipped' cable,  in which the pairs (TD,
   390	RD),  (RTS,CTS) and (DTR,DSR) have been flipped. Hence, the TD of
   391	one DTE is connected to the RD of the other DTE,  and vica versa.
   392	It  may  be necessary to wrap various of the  hand-shaking  lines
   393	back  around from the DTR on each end in order to have both  ends
   394	work.  In a similar manner,  two DCE devices can be interfaced to
   395	each other.
   396	
   397	   An  RS-232  'break-out box' is particularly useful in  solving
   398	interfacing problems.  This is a device which is inserted between
   399	the DTE and DCE. Firstly,  it allows you to monitor the state  of
   400	the  various hand-shaking lines (light on = signal ON / logic 0),
   401	and watch the serial data flicker on TD and/or RD.  Secondly,  it
   402	allows  you to break the connection on one or more of  the  lines
   403	(with  dip-switches),  and  make  any kind  of  cross-connections
   404	and/or wraparounds (with jumper wires).  Using this, it is fairly
   405	easy to determine which line(s) are not functioning as  required,
   406	and  quickly  build  a prototype of a cable that  will  serve  to
   407	interface the two devices.  At this point,  the break-out box can
   408	be  removed  and  a  real  cable built  that  performs  the  same
   409	function.  An example of this kind of device is the International
   410	Data Sciences, Inc. Model 60 'Modem and Terminal Interface Pocket
   411	Analyzer'  (also called a 'bluebox').  Care should be taken  with
   412	this  type of device to connect the correct end of it to the  DTE
   413	device,  or  the  lights and switches do not  correspond  to  the
   414	actual signals.
   415	
   416	