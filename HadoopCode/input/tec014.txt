     1	
     2	
     3	                             TECHNICAL SUPPORT BULLETIN
     4	
     5	  FILENAME:   TECH014.DOC
     6	  NUMBER:     014
     7	  SUBJECT:    DOS5.0
     8	
     9	  DATE:       June 18, 1991
    10	  TIME:       5:11 PM
    11	
    12	  SOURCE:         Tech Support
    13	  RELEASE STATUS: Public
    14	
    15	  TITLE:
    16	      MS-DOS 5.0 upgrade when STACKER is installed AND boot drive is SSWAPped.
    17	
    18	  OVERVIEW:
    19	      STACKER has been found highly compatible with MS-DOS 5.0.  This bulletin
    20	      outlines the upgrade procedure to 5.0 on a system where the boot drive
    21	      (usually C:) is SSWAPped with a STACKER volume.
    22	
    23	  ISSUES/COMMENTS:
    24	      1) If STACKER has not yet been installed, the DOS 5.0 upgrade should be
    25	      performed first, then STACKER should be installed.
    26	
    27	      2) If:
    28	          a) STACKER has been installed, AND
    29	          b) the boot drive (usually C:) is NOT being SSWAPped (verify via
    30	          SWAPMAP), AND
    31	          c) there is enough room on C: (2.8 MB) for the MS-DOS 5.0 files, THEN
    32	
    33	          simply run SETUP from the diskette drive.
    34	
    35	      It may be necessary to free up room on C: for the MS-DOS files if there is
    36	      not enough room for them.
    37	
    38	      3) Otherwise, this procedure assumes that C: is the boot drive, and that it
    39	      is SSWAPped with a STACKER volume. Type SWAPMAP from the \STACKER directory
    40	      to verify.  It also assumes that DOS files reside in a directory called
    41	      \DOS.  All of the following steps should be taken for a successful upgrade.
    42	
    43	  RECOMMENDED ACTIONS:
    44	      1) Boot computer as usual.  Change directory to C:\ (root).
    45	
    46	      2) Determine names of DOS hidden files:
    47	      Type
    48	              \STACKER\SDIR C:\ /H /P
    49	
    50	      There are two system files required by DOS; on some systems they are
    51	      MSDOS.SYS and IO.SYS; on others they are IBMBIO.COM and IBMDOS.COM.  Record
    52	      which two are listed on the screen.
    53	
    54	      3) Install MS-DOS 5.0 to diskettes:
    55	      Regardless of density, an installation from 5.25-inch disks will require
    56	      seven diskettes; if from 3.5-inch disks, installation will require four.
    57	      The diskettes do not need to be formatted.  Insert Disk 1 to drive A:.  A
    58	      different drive may be used.  Type
    59	
    60	              A:SETUP /F
    61	
    62	      and follow the instructions on the screen.  BE SURE to install MS-DOS 5.0 to
    63	      diskettes that will fit the A: drive for later rebooting.
    64	
    65	      4) Prepare to copy system files to STACKER volume:
    66	
    67	      Reboot from the hard drive.
    68	      Change directory to C:\STACKER.  Insert the MS-DOS 5.0 STARTUP diskette to
    69	      A:
    70	
    71	      5) Remove attributes on MS-DOS 5.0 system files:
    72	      Type
    73	              SATTRIB -R -S -H A:\IO.SYS
    74	              SATTRIB -R -S -H A:\MSDOS.SYS
    75	
    76	      (If UNsuccessful, SATTRIB will return a message; otherwise it will simply
    77	      return the DOS prompt.)
    78	
    79	      6) Remove attributes on system files in STACKER volume:
    80	      Refer to the DOS system files recorded in step (2).
    81	
    82	          a) If IO.SYS and MSDOS.SYS, type
    83	
    84	              SATTRIB -R -S -H C:\IO.SYS
    85	              SATTRIB -R -S -H C:\MSDOS.SYS
    86	
    87	          b) If IBMBIO.COM and IBMDOS.COM, type
    88	
    89	              SATTRIB -R -S -H C:\IBMBIO.COM
    90	              SATTRIB -R -S -H C:\IBMDOS.COM
    91	              DEL C:\IBM???.COM
    92	
    93	      7) Copy MS-DOS 5.0 system files to STACKER volume:
    94	      Type
    95	              COPY A:\IO.SYS C:\
    96	              COPY A:\MSDOS.SYS C:\
    97	              COPY A:\COMMAND.COM C:\
    98	              COPY A:\COMMAND.COM C:\DOS
    99	
   100	      8) Reset attributes on diskette and STACKER volume:
   101	      Type
   102	              SATTRIB +R +S +H A:\IO.SYS
   103	              SATTRIB +R +S +H C:\IO.SYS
   104	              SATTRIB +R +S +H A:\MSDOS.SYS
   105	              SATTRIB +R +S +H C:\MSDOS.SYS
   106	
   107	      9) Copy COMMAND.COM to drive which was C: at boot time (SWAPMAP to verify).
   108	      Type
   109	              COPY A:\COMMAND.COM <swapped drive>:\
   110	              COPY A:\COMMAND.COM <swapped drive>:\DOS
   111	
   112	      Then REBOOT with the MS-DOS 5.0 STARTUP diskette in A:.
   113	
   114	      10)Transfer system files to uncompressed (host) drive:
   115	      Insert the MS-DOS 5.0 SUPPORT diskette.  From A: type
   116	
   117	              SYS C:
   118	
   119	      It may be necessary to re-insert the STARTUP diskette.  If successful, a
   120	      "System transferred" message will display.
   121	
   122	      11)Remove the diskette and reboot (from the hard disk).
   123	
   124	      12)Install MS-DOS 5.0 files to hard drive:
   125	      Move (or delete) existing DOS files from the directory where they reside on
   126	      the compressed drive (usually C:\DOS) then copy in all of the MS-DOS 5.0
   127	      files; this will preserve the paths for CONFIG.SYS and AUTOEXEC.BAT.
   128	      Replace DOS files on the host volume (drive with which C: is SSWAPped
   129	
   130	      according to SWAPMAP) with the MS-DOS 5.0 versions.  Be sure that there is a
   131	      copy of COMMAND.COM in each DOS directory.