     1	     =================================================================
     2	                                  COLUMNS
     3	     =================================================================
     4	
     5	     Host net 508, Node:508/4 Tel. int+55 421284
     6	     Ignaat Simons
     7	     Chopinlaan 3
     8	     7333GA Apeldoorn Netherlands
     9	
    10	                       HAYES modems and compatables.
    11	
    12	
    13	     1. Introduction.
    14	
    15	     In the world of modem freaks and slowly on in the industrial
    16	     world, the HAYES modem is a defacto standard.
    17	
    18	     The official standards like RS232c (USA) and V24/V28 (CCITT)
    19	     describe the Physical part of a data circuit,  while the V25
    20	     (CCITT)  describes the A(uto) C(call) U(unit) function.  The
    21	     speeds and usage of the modems are laid down by the CCITT V-
    22	     standards, mainly in the V21 till V36 books.
    23	
    24	     Due  to  the different country and telephone  company  laws,
    25	     modems  are  different and not compatable with  each  other,
    26	     exept  modems of one vendor.  Some years ago,  it  was  very
    27	     unwise to make a connection with two different modems,  even
    28	     if  they  claimed to be according a V-xx norm.  Mostly  this
    29	     was no problem, because a  data transport was mainly between
    30	     two predefined points via a leased line or switched network.
    31	     The  connection was buildup manual,  or made  automatic  via
    32	     autocall function ACU (V25/RS232).
    33	
    34	     The  HAYES-300 modem (I think this was the  start),  besides
    35	     the  Physical  RS232/V24/V28  norm  did  specify  the  modem
    36	     control  command level between modem and terminal via the AT
    37	     leadin and the <silence>+++<silence> command to return  from
    38	     a  data  state to the command state.  Also it describes  the
    39	     handling  of  automatic speed detection.  This  command  set
    40	     enables  operators and application programmers to buildup  a
    41	     connection   via  normal  conversation.   As  it  could   be
    42	     programmed,  the  connection  via  a  switched  network  was
    43	     possible automatical via simple statements like "CALL John".
    44	     The  original HAYES-300 was not using call  procedures  like
    45	     108/1  or  108/2 (DTR circuit).  With the  HAYES-1200,  this
    46	     command  set  was extended to cope with more than  one  line
    47	     speed, the BELL 103 and BELL 212A. The last one more or less
    48	     compatable with the CCITT V22 norm. Also the automatic speed
    49	     selection in 'answering' mode was build in.  With the HAYES-
    50	     2400,  the set was dramatically extended with three  speeds,
    51	     BELL-103,  BELL-212A and the CCITT V22 and V22bis norms.  So
    52	     handling also in 'answering' mode an automatic selection. As
    53	     the  BELL-212A  and V22 uses a PSK (four-level  phase  shift
    54	     keying)   and    V22bis  uses  QAM   (Quadrature   Amplitude
    55	     Modulation)  technic,  which  were designed for  synchronous
    56	     modems,  the HAYES-modem translates the asynchrone data into
    57	
    58	
    59	     a  synchronous way by inserting and consequently removing  a
    60	     STOP bit in periods where no character is send.  The  HAYES-
    61	     1200  is  not compatible with the BELL-212A/V22  synchronous
    62	     modems. The HAYES-2400 is also in this aspect compatible and
    63	     serves  also the formal Half duplex  (RTS/CTS-handling).  As
    64	     the  HAYES-1200  did serve only the CCITT  108/2  mode,  the
    65	     HAYES-2400 supports also the 108/1 mode. Really you can say,
    66	     the  HAYES-2400 is a complex intelligent unit.  Despite  the
    67	     well written handbook of HAYES,  it is a hard job to make  a
    68	     compatible  one.  From all modems (compatibles) I have seen,
    69	     there are a few which come close to the HAYES,  the most are
    70	     fare away.
    71	
    72	     As  my  job  is Faultfinder (Support),  I  really  was  very
    73	     pleased,  HAYES  did implement in the HAYES-2400,  a  really
    74	     complete circuit test via the S16-register, even with remote
    75	     commands,  so the fully V54 norm of CCITT.  As most Hobbyist
    76	     but  even  profesionals  have  big  problems  with  reliable
    77	     circuit connections,  and more the solvation of it,  a modem
    78	     without this feature nowadays isn't worth the word MODEM  so
    79	     certainly not the word HAYES.
    80	
    81	     2. HAYES-clones.
    82	
    83	     What  is  "compatible".  Really nothing if not exactly  said
    84	     with WHAT.  "HAYES compatible" is to vaque.  "HAYES  command
    85	     set compatible" is better. Most modems, so not all, are only
    86	     compatible  with a "subset of HAYES command set".  But  also
    87	     most  "hayes" modems have commands not existing with  hayes.
    88	     Some  unlucky vendors did use commands or registers not used
    89	     with hayes-1200 at that time,  but later used in the  HAYES-
    90	     2400. (Bad Ques).
    91	
    92	     The  best  I can say most of the better clones are  more  or
    93	     less compatible upto HAYES-1200.
    94	
    95	     As  I  don't know if besides HAYES-1200 and the  HAYES-2400,
    96	     also a HAYES-300 exists,  I further only refer to this  two,
    97	     from  which both I have the specifications.  In Europe a lot
    98	     of  'hayes' modems with only the V21 and V23 speeds  exists,
    99	     which are similar,  but absolute not connectable,  with  the
   100	     BELL-103 and BELL-202 norm modems.
   101	
   102	     As  most  application programs only use a small set  of  the
   103	     HAYES-command set,  most clones will run with these packages
   104	     such  that the user is pleased,  not to use his fingers  and
   105	     ear  to  make a connection.  This if he has a user  friendly
   106	     telephone  company (are there),  but mostly the results  are
   107	     hopeless in peak  hours,  if there is a mismatch between the
   108	     modem commands and the terminal commands.  I had a modem and
   109	     a terminal program and on some day no nice CALL <my  mother>
   110	     was  succesfully.  With finger and ear there was no problem.
   111	     Reaction of the terminal was "BUSY". The real point was, the
   112	     modem  did  not pickup in ATX2 mode the dial tone  from  the
   113	     Telephone company,  so didn't start dialling.  As the  modem
   114	     had not a speaker (for cheapness),  I could not use the ATM1
   115	
   116	
   117	     command,  to follow the connection process.  The dial signal
   118	     was  strong  enough,  but the frequency was a little  ouside
   119	     (WHO's) specification.
   120	
   121	     3. The HAYES set.
   122	
   123	     With  this I hope,  without copying the whole 250  pages  of
   124	     both   Hayes  handbooks,   to  give  enough  information  to
   125	     understand the HAYES-set and the differences.
   126	
   127	     Hayes propose to use as terminal program, the Hayes Smartcom
   128	     II Version 2.1.
   129	
   130	     3.1. The Physical DCE/DTE-lines.
   131	
   132	     With DTE is meant the Data Terminal Equipment (Your terminal
   133	     or   Host   computer)  and  with  DCE   the   Data   Circuit
   134	     (termination)  Equipment  (all equipment between two  modems
   135	     RS232 plugs). The HAYES-1200B is the 1200 type but as a card
   136	     to be fitted into an IBM-PC. The same for HAYES-2400B.
   137	
   138	     The pin assignments must be in  accordance to ISO 2110.
   139	
   140	         Pin #  Circuit  Towards  Description         1200 2400
   141	               EIA/CCITT
   142	          1     AA 101   N/A      prot. ground          x    x
   143	          7     AB 102   N/A      signal  ,,            x    x
   144	
   145	          2     BA 103   DCE      transmit data         x    x
   146	          3     BB 104   DTE      receive  data         x    x
   147	
   148	          4     CA 105   DCE      request to send            x
   149	          5     CB 106   DTE      clear to send         H    x
   150	          6     CC 107   DTE      data set ready        R    x
   151	          20       108.1 DCE      connect data set      x    x
   152	          20    CD 108.2 DCE      data term. ready      x    x
   153	          22    CE 125   DTE      ring indicator        x    x
   154	          8     CF 109   DCE      data carrier detected x    x
   155	          23    CI 112   DTE      select altern. rate        x
   156	          12    CI       DTE      as previous (Bell212) x    x
   157	
   158	          24    DA 113   DCE      TX-clock (DTE source)      x
   159	          15    DB 114   DTE      TX-clock (synchr.)         x
   160	          17    DD 115   DTE      RX-clock (synchr.)         x
   161	
   162	     Remark: x means served by the modem.
   163	             H means tied to +10 volt (True).
   164	             R means tied to pin 8.
   165	             Pin  20  (DTR)  can be simulated  in  the  1200  and
   166	             1200B type with a dipswitch.
   167	             Pin  6  and  8  can be forced to true  in  the  1200
   168	             and 1200B type with a dipswitch.
   169	
   170	     3.2. The telephone line.
   171	
   172	     On  the telephone lin level some distinction can be made  on
   173	
   174	
   175	     the  HAYES-2400,  between  jack type RJ12/RJ13  (multi  line
   176	     jack) and the RJ11/RJ41S/RJ45S (single line jack).  The 1200
   177	     only  supports  the RJ11  (single  line),  RJ12/RJ13  (multi
   178	     line),  which  can be set by dipswitches.  This typically is
   179	     different per country.  In the USA and some other countries,
   180	     the  telephone  set remaines connected in  parallel  to  the
   181	     modem. In other countries like the Netherlands the telephone
   182	     set is switched of, as soon as the modem goes off-hook.
   183	
   184	     3.3. The modulation frequencies and call setup phase tones.
   185	
   186	     The  following  information is not exactly  the  HAYES-modem
   187	     information,  but  a   hopefully readable extract  from  the
   188	     CCITT-norms.  As I have not the Bell-norms, more or less the
   189	     USA norms are deducted from other documents.
   190	
   191	     The frequencies used with the different baudrates are:
   192	
   193	     3.3.1. For the F(requency) S(hift) K(eying) methodes.
   194	     These can be used as well as Synchrone.
   195	
   196	         Norm             Send     Receive  Answ.   mode
   197	                         '0'  '1'  '0' '1'  tone
   198	         Bell-103(ORG)  1070 1270 2025 2225 1270   300 FD
   199	         Bell-103(ANS)  2025 2225 1070 1270 2225   300 FD
   200	         Bell-202(main) 2200 1200 2200 1200 2025  1200 HD
   201	         Bell-202(back)  487  387  487  387   -  0-150 HD
   202	         V21 (ORGinate) 1180  980 1850 1650  980   300 FD
   203	         V21 (ANSwer)   1850 1650 1180  980 2100   300 FD
   204	         V23-1 (main)   1700 1300 2100 1300 2100   600 HD
   205	         V23-2 (main)   2100 1300 1700 1300 2100  1200 HD
   206	         V23   (back)    450  390  450  390   -  0-150 HD
   207	         Remark: '0'= "start bit" = "space"
   208	                 '1'= "stop bit"  = "mark"
   209	                 FD = Full Duplex, HD = Half Duplex.
   210	
   211	     Important  is,  the modems use  filter technics to  seperate
   212	     the transmit channel and receive channel. Some autoanswering
   213	     modems also by filter technics decide in which mode they are
   214	     called.
   215	
   216	     3.3.2. Automatic answering sequence (V25).
   217	
   218	     If  ringing  is received on the line,  the CE/CT125  circuit
   219	     (pin  22) will be raised true.  If CD/108 circuit was  true,
   220	     the modem goes OFF-HOOK.  If not the modem waits for a  true
   221	     signal  on  CD/108 (pin 20),  before it goes  OFF-HOOK.  The
   222	     modem remains after 'off hook',  for 1.8-2.5 sec. silent and
   223	     then transmits the 2100 Hz.  answer tone during 2.6-4.0 sec.
   224	     or till 100msec.  after a response from the calling station.
   225	     At least now 75 msec.  silence is maintained. The 2100 Hz is
   226	     intended   to  disable  network  echo  cancellers  or   echo
   227	     suppressors and is reversed in phase every 425-475 msec. Now
   228	     the  circuit CC/107 (pin 6) is set true to indicate  to  the
   229	     terminal, a connection is ready. The calling modem reacts on
   230	     the answer tone also by setting circuit CC/107 (pin 6) true.
   231	
   232	
   233	     A  response  normally  as mentioned is the  frequency  of  a
   234	     binary  '1'.  If the equipment of the telephone company does
   235	     not  have  echo control devices,  the 2100 Hz  tone  may  be
   236	     replaced  by  any other tone e.g.  directly the binary  '1'.
   237	     Only  after this sequence (or in ommission of  it)  directly
   238	     the  autospeed modems will determine the baudrate  norm.  In
   239	     Europe,  with  its V23-splitbaud rate complexity,  there are
   240	     Hayes  compatibles trying to select at the moment after  the
   241	     answer  sequence to select:  V21,  V23  (viditel),  V22  and
   242	     V22bis. This means actually a detection criteria for carrier
   243	     frequencies  at  980/1180  (V21),  450/390  (V23)  and  1200
   244	     V22(bis) modulated with 600 baud.  At the same time all kind
   245	     of frequencies like 2100,  550, 1800 Hz. and busy tone, dial
   246	     tones around 425 Hz. has to be ignored.
   247	
   248	     3.3.3.   For  the  D(iferential)  P(hase)  S(hift)  K(eying)
   249	     and the Q(uadrature) A(mplitude) M(odulation) methodes.
   250	
   251	     These methodes are primarly for synchrone transmission,  but
   252	     asynchrone is allowed  by inserting extra stop bits  between
   253	     characters.
   254	
   255	         Norm            Send Rec. Guard tone Mode       Methode
   256	
   257	         V22      (ORG)  1200 2400    -       600/1200 FD  DPSK
   258	         V22      (ANS)  2400 1200  1800(550) 600/1200 FD  DPSK
   259	         V22(bis) (ORG)  1200 2400    -       1200/2400 FD QAM
   260	         V22(bis) (ANS)  2400 1200  1800(550) 1200/2400 FD QAM
   261	         Bell-212A (ORG) 1200 2400    -       1200 FD      DPSK
   262	         Bell-212A (ANS) 2400 1200    -       1200 FD      DPSK
   263	
   264	     The  guard  tone is only send in the high channel (2400  Hz.
   265	     carrier,  so by the answering modem, but can be disabled per
   266	     country.  The 550 guard tone is another  option.   Basically
   267	     the  Bell-212 and the CCITT-V22 are the same.  But in detail
   268	     there are differences.  Which, I don't know yet for sure, it
   269	     may be the scrambled '0' instead '1's (see lateron).  But in
   270	     the  HAYES-2400,  there is a command ATBn,  with  which  the
   271	     BELL-212  (n=1) or V22 (n=0) is selected.  This only for the
   272	     1200 baud FD mode.  The V22bis is fully compatible with  the
   273	     V22  norm.  The  difference between V22 (600/1200 baud)  and
   274	     V22bis  (1200/2400  baud)  is V22 works with  2  dibits  and
   275	     V22bis with quadbits.  The way of working of PSK/QAM  modems
   276	     is  to complex to explain here,  but it is important to know
   277	     that a phase change of the modulated carrier of:
   278	
   279	          0 degrees is equal to dibit 01
   280	         90 degrees is equal to dibit 00
   281	        180 degrees is equal to dibit 10
   282	        270 degrees is equal to dibit 11
   283	
   284	     These  first two bits in the V22bis quadbit  are  compatible
   285	     with the dibits of V22,  to remain compatabilty for fallback
   286	     mode.  The V22bis has another 4 levels of detection by means
   287	     of a quadrature amplitude modulation technic.
   288	
   289	
   290	
   291	     3.3.4. Automatic answering mode V22(bis).
   292	
   293	     At calling time the sequence as described above with the FSK
   294	     type  modem  is  valid for the V22(bis).  The  called  modem
   295	     reacts instead or after the answer sequence with unscrambled
   296	     binary '1's at 1200 bit/sec.  and well in the upper  channel
   297	     (2400  Hz.  carrier).  This till it detects scrambled '0' or
   298	     '1's in the lower channel (1200 Hz.  carrier).  The  calling
   299	     modem  remains  silent  till  it  for   155  msec.   detects
   300	     unscrambled  '1's  in  the upper  channel,  after  which  it
   301	     remains  silent for 456 msec.  and then transmit unscrambled
   302	     double dibits 00 and 11,  if in V22bis mode,  for 100  msec.
   303	     followed  by  scrambled  binary '1's or if in  V22  mode  it
   304	     transmits  direct  scrambled  binary  '1's  (*).   Here  the
   305	     distinction 1200/2400 baud is made by the calling modem. The
   306	     called modem reacts with scrambled '1's preceded,  if V22bis
   307	     with  the unscrambled double dibit 00 and 11.  At the moment
   308	     of detection of the double dibits,  the circuit CI/112  (pin
   309	     12)  is set true (indicating 2400 baud).  In both cases  the
   310	     scrambled  '1's are observed for 600 msec.  after which  the
   311	     circuit  CF/109 (pin 8) is set true.  If V22 (1200) the data
   312	     transfer is started under control of CA/104 (pin 3).  In the
   313	     V22bis  mode (2400),  first scrambled binary '1's  are  send
   314	     form both sides for 200 msec.  on 2400 bit/sec. mode. Noted,
   315	     that  till  now all was transmitted on 1200  bit/sec.  After
   316	     this  200  msec.  also  the V22bis mode is  ready  for  data
   317	     transfer.
   318	
   319	     I  know it is confusing,  but so it works.  To make it  more
   320	     difficult,  the (*) mentioned in the text is true for V22bis
   321	     and for V22 alternative A and B only. For V22 alternative C,
   322	     for the '1's you have to read '0's.  As the V22 norm is very
   323	     confusing on some aspects, one remark has to be made. In V22
   324	     (not V22bis) 3 alternatives can be selected.  Alternative  A
   325	     and B are compatible with V22bis, but alternative C not. The
   326	     difference  is  the scrambled binary '0's stead '1's of  the
   327	     calling modem.  So the real difference between  alternatives
   328	     A/B  and C is,  that alternative C includes the  possibility
   329	     for mode V, for anisochronenous data upto 300 bit/sec. Which
   330	     manufacturer  tells me which alternative as mentioned in V22
   331	     he serves. Or has this to do with the Bell-212 norm. Who can
   332	     tell?  Has  this to do with the famous ATBn command  in  the
   333	     HAYES-2400 modem? See above.
   334	
   335	     Be  carefully  with  these  V22  and  Bell-212A  norms.   As
   336	     explained  before only the 2400 baud (V22bis) is compatible.
   337	     The 1200 sometimes works,  but sometimes not.  E.g. I had an
   338	     USA RIXTON 212 modem, not corrected for the European market.
   339	     Also  I  had a Dutch designed (DATAD) V22(bis) V23  and  V21
   340	     modem and an English (PACE) for the same speeds.  The RIXTON
   341	     works pretty most at the time with both the DATAD and   PACE
   342	     modem. But sometimes it goes wrong and the Eurpeans connects
   343	     at 2400, which is strange, but true. With an original HAYES-
   344	     1200  (with no ATBn) command as the HAYES-2400  has,  nearly
   345	     the same result. The two Europeans hardly are connectable at
   346	     1200  baud to each other.  This has in my opinion to do with
   347	
   348	
   349	     the  way  of speed selection.  We try to come  out  of  this
   350	     struggle.
   351	
   352	     3.4. Some advise on real physical level.
   353	
   354	     If  you  are ggiing into communications with modems and  you
   355	     have  no  Telecomfreak-friend close to you and you  want  no
   356	     nervous  breakdown  in  the near future,  have  at  least  a
   357	     "breakbox",  self made or from the shop. This to follow  the
   358	     different DTE/DCE levels. If you want to log a HAYES session
   359	     to evaluate the connection process or data exchange process,
   360	     make from your old computer a "DATASCOPE".  (See Appendix  A
   361	     for  some  suggestions).  An other advise is to  standardise
   362	     your cable set.  As some manufactures make a mash of the V24
   363	     or  RS232C pins,  you have not to follow  it.  On  telephone
   364	     line  level it is handy to have in your surrounding a  scope
   365	     or frequency counter.
   366	
   367	     3.5. Connection of the terminal to the HAYES.
   368	
   369	     The  Hayes modem has a minimum and a maximum baud  rate.  If
   370	     you connect a terminal to the modem,  make sure you have the
   371	     right pins connected in relation with the dipswitches.  Also
   372	     if you have selected e.g.  108/2 mode, be sure your terminal
   373	     program  support them.  It is possible to connect  only  the
   374	     pins  2,3  and 7.  So in this case the DTR and the  DCD  are
   375	     forced true.  In general I don't like this methode. With the
   376	     Hayes-1200, RTS and CTS are not used, so only full duplex is
   377	     possible. With Hayes-2400 you have to use these signals only
   378	     if you use the Half Duplex mode (Synchrone mode).  Otherwise
   379	     RTS (pin 4) is neglected and CTS (pin 5) is set true.
   380	
   381	     So if you have connected the terminal properly,  at the time
   382	     you give an 'A' or 'a',  the modem decides what the baudrate
   383	     is  and  set  the terminal interface UART according  to  it.
   384	     Hayes is very street forward.  This speed is maintained till
   385	     after the <carriage return>, which always finishes a command
   386	     line.  With  the next A from a new AT command  line,  a  new
   387	     speed  can be defined.  There is one other  possibility.  In
   388	     auto  answer mode or if a call is made,  the baudrate can be
   389	     else as the speed in the last passed command mode.  This  on
   390	     real  modem  level,  the baudrate detection selects  another
   391	     speed.  The Hayes reacts with the connect code on this  last
   392	     command  mode speed and than switches to the new  speed.  To
   393	     give an example.  Suppose the terminalspeed is 2400 baud.  A
   394	     dial is made towards a 1200 baud only modem.  The Hayes will
   395	     start  the connect phase as described in 3.3.2.  but finally
   396	     will get a connection on 1200 baud. So he will react towards
   397	     the terminal with 2400 baud with 'CONNECT' or '1',  switches
   398	     back  to  1200  baud,  which the  terminal  has  to  follow,
   399	     otherwise  it result in a  terminal/modem mismatch.  Also  a
   400	     <silence>+++<silence>  on  2400 baud will not  be  accepted.
   401	     Only  1200  baud,  from  this  moment  on.  So  suppose  the
   402	     established  call  at 1200 baud is broken.  The Hayes  will,
   403	     after  the carrier disappear,  fall back into  command  mode
   404	     still  in 1200 baud.  The terminal has to give an AT<string>
   405	
   406	
   407	     on  2400 baud if it wants the original 2400 baud  connection
   408	     again.
   409	
   410	     3.6. The differences in the Hayes command set.
   411	
   412	     Very  short a comparision between HAYES-1200 and  HAYES-2400
   413	     modem will be given and only per command a short  functional
   414	     recoqnition.  First however the Hayes command-input line. It
   415	     starts with AT or at (no mix of UPPER/lower) and ends with a
   416	     cariage  return  from now on indicated with <CR>.  The  only
   417	     exeption  is the A/ command,  which needs  no  <CR>.  During
   418	     commandline editing backspace (hex '08') is accepted. One or
   419	     more  commands can be given after one leading AT.  The  max.
   420	     length of the input string however is 40 char.
   421	     Blanks can be inserted for more readability.
   422	
   423	     Command. What does it. Hayes-1200 Hayes-2400 Return code
   424	
   425	         AT       Attention         y          y          OK
   426	         A/       Repeat last comm. y          y      depends
   427	         A        Off hook (ANS)    y          y      none (data)
   428	         Bn       1200 (V22/Bell)   -        n=0-1,1      OK
   429	         Cn       TX off/on         n=0-1      -          OK
   430	         D<modif> Dial              y          y     see modifier
   431	         En       Echo off/on(comm) n=0-1    n=0-1,1      OK
   432	         Fn       Echo off/on(data) n=0-1      -          OK
   433	         Hn       Hook on/off/spec. n=0-2    n=0-1    none (data)
   434	         In       prod.code/prom-cc n=0-1    n=0-2    info
   435	         Ln       Speaker (L/M/H)   -        n=0-2,1      OK
   436	         Mn       Speaker off/on    n=0-2    n=0-3,1      OK
   437	         On       Online            only O   n=0-1    none (data)
   438	         P        Set pulse dial    y          y          OK
   439	         Qn       Result code Y/N   n=0-1    n=0-1,0      OK
   440	         Sr=n     Set reg. r to n   r=0-16   r=0-27       OK
   441	         Sr?      Display reg. r    r=0-16   r=0-27   contents r
   442	         T        Set touch dial    y          y          OK
   443	         Vn       Result code N/W   n=0-1    n=0-1,1      OK
   444	         Xn       Dial process      n=0-1    n=0-4,4      OK
   445	         Yn       Long disconn.     -        n=0-1,0      OK
   446	         Zn       Reset             only Z   n=0-1        OK
   447	
   448	         &Cn      DCD on/carrier    -        n=0-1,0      OK
   449	         &Dn      DTR modes         -        n=0-3,0      OK
   450	         &F       Load factory set  -          y          OK
   451	         &Gn      Gaurd tone        -        n=0-2,0      OK
   452	         &Jn      RJ-jack sel.      -        n=0-1,0      OK
   453	         &Mn      Asynch./Synchr.   -        n=0-3,0      OK
   454	         &Pn      Pulse ratio       -        n=0-1,0      OK
   455	         &Rn      CTS mode          -        n=0-1,0      OK
   456	         &Sn      DSR mode          -        n=0-1,0      OK
   457	         &Tn      Test local/remote -        n=0-8        OK
   458	         &V       Display conf/tel  -          y          OK
   459	         &Wn      Write conf. MOS   -        n=0-1        OK
   460	         &Xn      Line clock mode   -        n=0-2,0      Ok
   461	         &Yn      Sel. default prof.-        n=0-1        OK
   462	         &Zn      Store teleph. nr. -        n=0-3        OK
   463	
   464	
   465	         Remark: n=0-2,1 means, n can be 0,1,2 and 1=default.
   466	                 If n=0 this may ommitted. (ATV0 equal to ATV).
   467	                 All numbers are in decimal (max.=255).
   468	
   469	     Dial     What does   Hayes-1200 Hayes-2400
   470	     Modifier it
   471	         P        Pulse dial        y          y
   472	         R        Reverse to ANSW   y          y
   473	         Sn       Dial stored tel.  -        n=0-3
   474	         T        Touch dial        y          y
   475	         W        Wait 2e dialtone  -          y
   476	         .        Pause             y          y
   477	         !        Flash             -          y
   478	         @        Wait for silence  -          y
   479	         ;        Return to comm.   y          y
   480	
   481	         The registers.
   482	         Reg.  What does it.       Hayes-1200 Hayes-2400
   483	         S0    Ring to answ.on     0-255      0-255,00
   484	         S1    Ring count          0-255,00   0-255,00
   485	         S2    Escape code         0-127,43   0-127,43 ASCII
   486	         S3    Cariage return      0-127,13   0-127,13 ASCII
   487	         S4    Line feed code      0-127,10   0-127,10 ASCII
   488	         S5    Back space code     0-127,08   0-127,08 ASCII
   489	         S6    Wait for dial tone  0-255,02   0-255,02 Sec.
   490	         S7    Wait for carrier    1-30,30    1-30,30  Sec.
   491	         S8    Pause time comma    0-255,02   0-255,02 Sec.
   492	         S9    Carrier detect time 1-255,06   1-255,06 1/10 Sec.
   493	         S10   Lost carrier time   1-255,07   1-255,14 1/10 Sec.
   494	         S11   DTMF dialing speed  50-255,70  50-255,95 mSec.
   495	         S12   Escape code guard   0-255,50   0-255,50 1/50 Sec.
   496	         S13   UART status reg.    y          y
   497	         S14   Option reg.         y          x'AA'
   498	         S15   Flag reg.           y          y
   499	         S16   Modem test          0-2,0      bit settings
   500	         S17   res.                -          res.
   501	         S18   Modem test time     -          1-255,00 Sec.
   502	         S19   Res.                -          Res.
   503	         S20   Res.                -          Res.
   504	         S21   Bit mapped options  -          00
   505	         S22   Bit mapped options  -          x'76'
   506	         S23   Bit mapped options  -          07
   507	         S24   Res.                -          Res.
   508	         S25   Detect DTR change   -          0-255,05 1/100 Sec.
   509	         S26   RTS to CTS delay    -          0-255,01 1/100 Sec.
   510	         S27   Bit mapped options  -          x'40'
   511	
   512	         Remark: 1-255,01 means, range 1 till 255, 01=default.
   513	                 All numbers are in decimal (max.=255).
   514	                 x'76' is hexadecimal.
   515	
   516	
   517	
   518	         Return codes Hayes-1200 Hayes-2400
   519	         Digit  Word
   520	         0      OK       y          y
   521	         1    CONNECT    y          y
   522	         2     RING      y          y
   523	         3   NO CARRIER  y          y
   524	         4     ERROR     y          y
   525	         5  CONNECT 1200 y          y
   526	         6  NO DIALTONE  -          y
   527	         7     BUSY      -          y
   528	         8   NO ANSWER   -          y
   529	         9   reserved    -          -
   530	         10 CONNECT 2400 -          y
   531	
   532	                                  ========
   533	
   534	     Appendix A.  Datascope.
   535	
   536	     A  datascope  looks  to both the RXD and the TXD line  of  a
   537	     V24/RS232C line.  So only follows what happens on the  line.
   538	     There are very nice commercial packages as FELINE,  HP etc.,
   539	     but  they are expensive and they use mostly a special POD to
   540	     connect to the V24 line.  Most of them you have to preset on
   541	     one speed and than to start the logging.
   542	
   543	     If   you  have  an  old  computer  with  better  two   speed
   544	     programmable UART or a SIO chip and you can program them  in
   545	     Assembler/basic/pascal or C, you can make your one one.
   546	
   547	     The   next  story  is  a  simplified  logunit  only  to  log
   548	     datastreams   preceded  with  a  AT-string.   Most  of   the
   549	     application programs works in terminal session as well
   550	
   551	     filetransport in a half duplex mode. Or better, never the TX
   552	     and RX line transports a character.  So basically in default
   553	     you have to look to the TXD-line,  and look at 2400 baud for
   554	     a  character x'41','06',  '78' or '01'.  At that moment  you
   555	     know that probably the speed is 2400, 1200, 600 or 300 baud.
   556	     You get on line speeds 600 and 1200 a framing error, because
   557	     the  stop-bit is not detected.  Now depending  the  detected
   558	     speed  you  have  to wait (time-out) till the  rest  of  the
   559	     character  is passed,  then you have to change the speed  of
   560	     your comm-port,  and await for the 'T',  If it is a 'T' than
   561	     you  have  the  speed,  if  not wait on 2400  baud  for  the
   562	     posibilities as described above.  The basic idee behind this
   563	     is really simple.  If you listen with 2400 bit/sec to a  300
   564	     bit/sec  send character,  the start bit is detected and will
   565	     serve  for  the startbit and 7 bits char.  bits (so  7  zero
   566	     bits).  The  eights char.  bit is formed of the LSB bit  and
   567	     well 1/8 portion of it.  The second portion will be the stop
   568	     bit.  So if on the line really is transmitted a 600  bit/sec
   569	     char.,   the same is true with 1/4 portions. Furthermore you
   570	     have to look to both the TXD and RXD line, if on one a char.
   571	     is received.  If so you put this char. in its own buffer and
   572	     in the other one a x'00'.  Lateron you can print it out, one
   573	     line  from  buffer RXD,  one line from buffer TXD in Hex  or
   574	
   575	
   576	     ASCII (or both) outfit.
   577	
   578	     Go on on the same speed till you didn't receive for 30  sec.
   579	     any  character  on  both  lines  and  start  again  with  AT
   580	     synchronisation.  In fact the HAYES inside micro computer is
   581	     doing  the  same.  Don't try to write the buffer to disk  at
   582	     first instance,  because you need a DMA at least, but also 2
   583	     buffers.  So buffer it in memory only.  You can try to write
   584	     to disk in the silence just before the new AT string.
   585	
